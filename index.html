<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Editor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <header class="menu-bar">
            <div class="menu-item">
                <span class="menu-label">File</span>
                <div class="menu-dropdown">
                    <input type="file" id="fileInput" accept=".svg" style="display: none;">
                    <div class="menu-option" id="openBtn">
                        <span>Open...</span>
                        <span class="menu-shortcut">Ctrl+O</span>
                    </div>
                    <div class="menu-option" id="saveBtn">
                        <span>Save</span>
                        <span class="menu-shortcut">Ctrl+S</span>
                    </div>
                    <div class="menu-option" id="settingsBtn">
                        <span>Settings...</span>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Settings Dialog -->
        <div id="settingsDialog" class="dialog-overlay" style="display: none;">
            <div class="dialog">
                <div class="dialog-header">
                    <h3>Settings</h3>
                    <button class="dialog-close" id="settingsDialogClose">×</button>
                </div>
                <div class="dialog-content">
                    <div class="dialog-field">
                        <label for="dpiInput">DPI (Dots Per Inch):</label>
                        <input type="number" id="dpiInput" class="dialog-input" value="96" min="1" max="600">
                    </div>
                    <div class="dialog-field">
                        <label for="arrowKeyIncrement">Arrow Key Increment:</label>
                        <input type="number" id="arrowKeyIncrement" class="dialog-input" value="1" min="0.1" step="0.1">
                    </div>
                    <div class="dialog-field">
                        <label for="shiftArrowKeyIncrement">Shift+Arrow Key Increment:</label>
                        <input type="number" id="shiftArrowKeyIncrement" class="dialog-input" value="10" min="0.1" step="0.1">
                    </div>
                    <div class="dialog-field">
                        <label for="proximityThreshold">Proximity Threshold (pixels):</label>
                        <input type="number" id="proximityThreshold" class="dialog-input" value="10" min="1" step="1">
                    </div>
                    <div class="dialog-actions">
                        <button id="settingsCancelBtn" class="dialog-button">Cancel</button>
                        <button id="settingsSaveBtn" class="dialog-button dialog-button-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="control-panel">
            <div class="control-group" id="pathControls" style="display: none;">
                <label class="control-label">Fill:</label>
                <div class="color-input-wrapper">
                    <input type="color" id="fillColor" class="color-input" value="#000000">
                    <input type="text" id="fillColorText" class="color-text-input" value="#000000" placeholder="#000000">
                </div>
                
                <label class="control-label">Stroke:</label>
                <div class="color-input-wrapper">
                    <input type="color" id="strokeColor" class="color-input" value="#000000">
                    <input type="text" id="strokeColorText" class="color-text-input" value="#000000" placeholder="#000000">
                </div>
                
                <label class="control-label">Stroke Width:</label>
                <input type="number" id="strokeWidth" class="number-input" value="1" min="0" step="0.1">
                
                <label class="control-label">Opacity:</label>
                <input type="number" id="opacity" class="number-input" value="1" min="0" max="1" step="0.01">
                
                <button id="logAttributesBtn" class="control-button">Log Attributes</button>
            </div>
            
            <div class="control-group empty-controls" id="emptyControls">
                <span class="control-hint">Select an object to edit properties</span>
            </div>
        </div>
        
        <div class="main-content">
            <aside class="tool-palette">
                <button id="selectTool" class="tool-palette-btn active" data-tool="select" title="Select">
                    <svg class="tool-icon" viewBox="0 0 24 24" width="24" height="24">
                        <!-- Black arrow cursor (Select tool) -->
                        <path d="M3 3l7 18 3-8 8-3L3 3z" fill="currentColor" stroke="none"/>
                        <path d="M3 3l7 18 3-8 8-3" stroke="white" stroke-width="0.8" fill="none" stroke-linejoin="round"/>
                    </svg>
                    <span class="tool-tooltip">Select</span>
                </button>
                <button id="directSelectTool" class="tool-palette-btn" data-tool="direct-select" title="Direct Select">
                    <svg class="tool-icon" viewBox="0 0 24 24" width="24" height="24">
                        <!-- White arrow cursor (Direct Select tool) -->
                        <path d="M6 4l8 17M14 8l7-4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="6" cy="4" r="2.5" fill="white" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    <span class="tool-tooltip">Direct Select</span>
                </button>
                <button id="marqueeSelectTool" class="tool-palette-btn" data-tool="marquee-select" title="Marquee Select">
                    <svg class="tool-icon" viewBox="0 0 24 24" width="24" height="24">
                        <!-- Dashed rectangle (Marquee Select tool) -->
                        <rect x="4" y="4" width="16" height="16" stroke="currentColor" stroke-width="1.5" fill="none" stroke-dasharray="2,2"/>
                    </svg>
                    <span class="tool-tooltip">Marquee Select</span>
                </button>
            </aside>
            
            <main class="canvas-container">
                <div id="svgContainer" class="svg-container">
                    <div class="empty-state">
                        <p>Open an SVG file to start editing</p>
                    </div>
                </div>
            </main>
            
            <aside class="toolbar-panel">
                <div class="toolbar-button" id="historyToolButton" title="History">
                    <svg class="toolbar-icon" viewBox="0 0 24 24" width="20" height="20">
                        <path d="M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18z" fill="currentColor"/>
                        <path d="M12 8v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" fill="currentColor"/>
                    </svg>
                </div>
                
                <div class="tool-panel" id="historyPanel">
                    <div class="tool-panel-header">
                        <span class="tool-panel-title">History</span>
                        <button class="tool-panel-close" id="historyPanelClose" title="Close">×</button>
                    </div>
                    <div class="tool-panel-content">
                        <div id="historyList" class="history-list">
                            <p class="empty-message">No history yet</p>
                        </div>
                    </div>
                </div>
                
                <div class="toolbar-button" id="transformToolButton" title="Transform">
                    <svg class="toolbar-icon" viewBox="0 0 24 24" width="20" height="20">
                        <path d="M12 2L2 7v10l10 5 10-5V7L12 2z" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linejoin="round"/>
                        <path d="M2 7l10 5M12 12l10-5M12 12v10M2 17l10 5" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linejoin="round"/>
                    </svg>
                </div>
                
                <div class="tool-panel" id="transformPanel">
                    <div class="tool-panel-header">
                        <span class="tool-panel-title">Transform</span>
                        <button class="tool-panel-close" id="transformPanelClose" title="Close">×</button>
                    </div>
                    <div class="tool-panel-content">
                        <div class="transform-group">
                            <label class="transform-label">Units:</label>
                            <select id="transformUnit" class="transform-select">
                                <option value="px">px</option>
                                <option value="mm">mm</option>
                                <option value="in">in</option>
                            </select>
                        </div>
                        <div class="transform-group">
                            <label class="transform-label">W:</label>
                            <input type="number" id="transformWidth" class="transform-input" step="0.1" min="0.1">
                            <span class="transform-unit-label" id="transformWidthUnit">px</span>
                        </div>
                        <div class="transform-group">
                            <label class="transform-label">H:</label>
                            <input type="number" id="transformHeight" class="transform-input" step="0.1" min="0.1">
                            <span class="transform-unit-label" id="transformHeightUnit">px</span>
                        </div>
                        <div class="transform-group">
                            <label class="transform-label">Scale:</label>
                            <input type="number" id="transformScale" class="transform-input" step="0.1" min="0.1" max="1000">
                            <span class="transform-unit-label">%</span>
                        </div>
                        <div class="transform-group">
                            <label class="transform-label" style="width: auto; flex: 1;" for="scaleAboutOwnCenter">
                                <input type="checkbox" id="scaleAboutOwnCenter" style="margin-right: 6px;">
                                Scale each about own center
                            </label>
                        </div>
                    </div>
                </div>
            </aside>
            
            <aside class="layers-panel">
                <h3>Layers</h3>
                <div id="layersList" class="layers-list">
                    <p class="empty-message">Open an SVG file to see layers V1</p>
                </div>
            </aside>
        </div>
    </div>
    
    <script src="selection/element-selection.js"></script>
    <script src="selection/node-selection.js"></script>
    <script src="transforms/bounding-box.js"></script>
    <script src="layers/layer-manager.js"></script>
    <script src="utils/history-manager.js"></script>
    <script src="tools/select-tool.js"></script>
    <script src="tools/direct-select-tool.js"></script>
    <script src="tools/marquee-tool.js"></script>
    <script src="app.js"></script>
</body>
</html>


